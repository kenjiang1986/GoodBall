!function(e,o){o.debug="localhost"==window.location.hostname,o.promiseApi=function(e,t,r){var i=o.Deferred(),n=o.debug?"http://localhost:3000/":"http://m.ddjiadian.com/",d=o.debug?"3eb72Q560BYRrvg9ITkrwyjuHX/FjL7hmTn7e9BuWbZ3J/gB1+e3wPsv3CJHQVlp6VHxJzfpAIDMqGcnDJ4i3EywEa9AUQMfy6kb/RpjBEaHup4E":"";return o.ajax({url:n+e+".php",data:o.extend(t,{access_token:d}),type:r?r:"GET",dataType:"JSON",cache:!1,success:function(e){if(200==e.status)i.resolve(e.data);else{if(10086==e.status)return void(window.location.href="/gzh/index.php?origin_url="+encodeURIComponent(window.location.href));i.reject(e.msg)}},error:function(e){(o.debug?console.log:o.noop)(e),i.reject("服务器出错")}}),i.promise()},o.api={promise:function(){return o.Deferred()},get_weixin_banner:function(e){return o.promiseApi("get_weixin_banner",{city:e})},get_hot_products:function(){return o.promiseApi("shop/hots",{})},get_goods_info:function(e,t){return o.promiseApi("get_goods_info",{sid:e,city:t})},add_cart:function(e){return o.promiseApi("add_cart",{goods:e},"POST")},checkout:function(e){return o.promiseApi("checkout",{coupon_id:e})},get_city_dists:function(e){return o.promiseApi("get_city_dists",{city:e})},add_addr:function(e,t,r,i,n,d){return o.promiseApi("add_addr",{contactor:e,mobile:t,city:r,dist:i,detail:n,doorplate:d})},update_addr:function(e,t,r,i,n,d,s){return o.promiseApi("update_addr",{idx:e,contactor:t,mobile:r,city:i,dist:n,detail:d,doorplate:s})},get_add_by_idx:function(e){return o.promiseApi("get_add_by_idx",{idx:e})},del_addr:function(e){return o.promiseApi("del_addr",{idx:e})},get_user_addrs:function(){return o.promiseApi("get_user_addrs",{})},get_avail_daytime:function(e,t,r){return o.promiseApi("get_avail_daytime",{sid:e,city:t,dist:r})},gen_order:function(e,t,r,i){return o.promiseApi("gen_order",{address_idx:e,book_day:t,book_period:r,coupon_id:i})},order_detail:function(e){return o.promiseApi("order_detail",{oid:e})},orders:function(e){return o.promiseApi("get_my_orders",{status:e})},shop_categories:function(){return o.promiseApi("shop/categories")},shop_orders:function(e){return o.promiseApi("shop/orders",{status:e})},shop_order_detail:function(e){return o.promiseApi("shop/order_detail",{oid:e})},shop_products:function(e,t,r){return o.promiseApi("shop/products",{page:e,category_id:t,filter:r})},shop_product:function(e){return o.promiseApi("shop/product",{goods_id:e})},shop_add_cart:function(e,t){return o.promiseApi("shop/add_cart",{goods_id:e,num:t})},shop_place_order:function(e){return o.promiseApi("shop/place_order",{address_idx:e})},shop_cart:function(){return o.promiseApi("shop/checkout")},cancel_order:function(e){return o.promiseApi("cancel_order",{order_id:e})},shop_cancel_order:function(e){return o.promiseApi("shop/cancel_order",{oid:e})},wx_pay:function(e){return o.promiseApi("payment/wechat/pay",{order_ids:e})},profile:function(){return o.promiseApi("get_my_account",{})},comment:function(e,t,r,i){var n="5"==t?"shop/comment":"add_order_comment";return o.promiseApi(n,{order_id:e,star:r,comment:i},"POST")},comments:function(e,t){return o.promiseApi("shop/comments",{goods_id:e,page:t})},get_coupon:function(e){return o.promiseApi("get_user_coupons",{sid:e})}}}(document,jQuery),function(e,o,t,r){e.init=function(i){var n=o(e).width()/375;n<1&&o("meta[name=viewport]").attr({content:"width=device-width, initial-scale="+n+", maximum-scale="+n+", user-scalable=no, target-densitydpi=high-dpi, minimal-ui"}),r.nextTick(function(){t.init(),(i||o.noop)()})},e.getParam=function(o){var t=new RegExp("(^|&)"+o+"=([^&]*)(&|$)"),r=e.location.search.substr(1).match(t);return null!=r?unescape(r[2]):null},t.scope=function(){return t(".page")[0].__vue__}}(window,jQuery,Zepto,Vue),function(e,o,t,r){function i(e,t,r){var n=o(t);n.empty();for(var d=1;d<=5;d++)o("<a/>",{score:d,class:e>=d?"star filled":"star"}).html("★").appendTo(n);n.attr("canset")&&o("a",n).one("click",function(){r.vm[r.params.value]=o(this).attr("score"),i(o(this).attr("score"),t,r)})}r.elementDirective("rating",{params:["value"],twoWay:!0,paramWatchers:{value:function(e){i(e,this.el,this)}},bind:function(){i(0,this.el,this)},unbind:function(){o(this.el).remove()}})}(window,jQuery,Zepto,Vue);