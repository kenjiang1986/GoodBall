@{
    Layout = "~/Views/Shared/WechatPage.cshtml";
}

<form id="form1">
    <div class="register v-transition">
        <header class="bar bar-nav">
            <h1 class="title button-fill button-danger">注册</h1>
        </header>
        <div class="inputbox content"><div class="phone">
                                          <input id="phone" name="phone" class="phonenum" type="text" placeholder="请输入手机号"> 
                                          <span onclick="SendCode()" class="nosend button button-danger">发送验证码</span>
                                         <span id="spanReSend" class="asend" style="display:none">60秒后可重发</span>
                                      </div>
        <div class="code">
            <input id="code" name="code" class="codenum" type="text" placeholder="请输入短信验证码"> <span></span>
                                            </div><div class="psw">
                                                      <input id="password" name="password" class="pswin" type="password" placeholder="请输入密码"> <span></span>
                                                  </div><div class="psw">
                                                            <input class="pswin" type="password" placeholder="请再次输入密码"> <span></span>
                                                        </div><div onclick="Submit()" class="btn button button-fill button-danger">注&nbsp;&nbsp;&nbsp;&nbsp;册</div></div>
    </div>
</form>

<script>

    function Submit() {
        var url = "/WechatReg/Register";
        $.ajax({
            type: "POST",
            url: url,
            dataType: "json",
            async: true,
            data: $("#form1").serialize(),
            success: function (data) {

                if (data.success) {
                    alert("注册成功");
                    //window.location.href = "/WechatLogin/Login"
                }
                else {
                    alert(data.message);
                }
            },
        });
    }

    function SendCode() {
        var url = "/WechatReg/SendCode";
        $.ajax({
            type: "POST",
            url: url,
            dataType: "json",
            async: true,
            data: $("#form1").serialize(),
            success: function (data) {

                if (data.success) {
                    $("#spanReSend").show();
                    alert("验证码已经成功发送到手机");
                    //window.location.href = "/WechatLogin/Login"
                }
                else {
                    alert(data.message);
                }
            },
        });
    }

</script>