<!DOCTYPE html>
@{
    Layout = "~/Views/Shared/WechatPage.cshtml";
}

    <div class="news-list content page" id="newsList">
        <ul>
            <li class="item-content" v-for="new in news">
                <a href="www.baidu.com">
                    <div class="news-pic"><img class="redian_wenzhang_in_l" v-bind:src="new.TitleImageUrl" alt=""></div>
                    <div class="item-inner">
                            <h3 class="item-title active" v-text="new.Title"></h3>
                        <p v-text="new.CreateTime"></p>
                    </div>
                </a>
            </li>
            @*<li class="item-content">
                <div class="news-pic"><img class="redian_wenzhang_in_l" src="http://www.6383.com//Uploads/Picture/20170309/58c0f9a1b6f31.jpg" alt=""></div>
                <div class="item-inner">
                    <h3 class="item-title active">圣保罗锦:巴西红牛VS博塔弗SP</h3>
                    <p>2017/3/27 6:00:00</p>
                </div>
            </li>
            <li class="item-content">
                <div class="news-pic"><img class="redian_wenzhang_in_l" src="http://www.6383.com//Uploads/Picture/20170309/58c0f9a1b6f31.jpg" alt=""></div>
                <div class="item-inner">
                    <h3 class="item-title active">圣保罗锦:巴西红牛VS博塔弗SP</h3>
                    <p>2017/3/27 6:00:00</p>
                </div>
            </li>
            <li class="item-content">
                <div class="news-pic"><img class="redian_wenzhang_in_l" src="http://www.6383.com//Uploads/Picture/20170309/58c0f9a1b6f31.jpg" alt=""></div>
                <div class="item-inner">
                    <h3 class="item-title active">圣保罗锦:巴西红牛VS博塔弗SP</h3>
                    <p>2017/3/27 6:00:00</p>
                </div>
            </li>*@
        </ul>
    </div>
   
    <script type="text/javascript">
(function (Vue, $, api) {
    window.vm = new Vue({
        el: '#newsList',
        data: {
            news: []
        },
        methods: {
            pay$$load: function () {
                //$.showIndicator();
                api.get_newslist("即时新闻").then(function (data) {
                    this.news = data;
                    $.hideIndicator();
                }.bind(this), function (msg) {
                    $.hideIndicator();
                    $.alert(msg);
                })
            },
            pay$$payment: function () {
                switch (this.pay_mode) {
                    case 'weixin':
                        var oid = window.getParam('id');
                        $.showIndicator();
                        api.wx_pay(oid).then(function (data) {
                            WeixinJSBridge.invoke('getBrandWCPayRequest', data, function (res) {
                                    $.hideIndicator();
                                    if (res.err_msg == "get_brand_wcpay_request:ok") {
                                        $.alert('支付成功', function () {
                                            window.location.href = 'finish.html?id=' + window.getParam('id');
                                        });
                                    }
                                }
                            );
                        }.bind(this), function (msg) {
                            $.hideIndicator();
                            $.alert(msg);
                        });
                        break;
                    case 'xianxia':
                        window.location.href = 'finish.html?id=' + window.getParam('id');
                        break;
                    default:
                        $.alert('请选择支付方式');
                        break;
                }
            }
        },
        ready: init(function () {
            $.scope().pay$$load(window.getParam('id'));

        })
    });
})(Vue, Zepto, jQuery.api);</script>
